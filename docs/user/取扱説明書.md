# 投資競馬オッズ分析システム 取扱説明書

このシステムは、**「データの収集（黒い画面）」**と**「データの分析（Web画面）」**の2つの部分で構成されています。

## システムの全体像（ワークフロー）

1.  **【収集】**: `アプリ起動.bat` を使って、JRA-VANからデータをパソコンに取り込みます。
2.  **【分析】**: `http://localhost:5000`（Web画面）を開いて、取り込んだデータをグラフで見ます。

---

## 1. アプリ起動ランチャー (`アプリ起動.bat`)

**役割**: JRA-VANサーバーと通信し、データを取得・保存するための「エンジンの操作盤」です。

| 機能 | 状態 | 説明 |
| :--- | :---: | :--- |
| **[1] 過去データを取得** | ✅ | **[重要]** 最初は必ずこれを実行してください。<br>期間とデータ種類（確定のみ/時系列）を選択できます。 |
| **[2] リアルタイム監視** | ✅ | レース開催日（土日）に使用します。<br>リアルタイムで速報オッズを受信し続けます。<br>※起動中は画面を開いたままにしてください。 |
| **[3] 設定ファイル編集** | ✅ | JRA-VANのサービスキーなどを修正する場合に使います。 |

---

## 2. Web分析画面 (`http://localhost:5000`)

**役割**: 保存されたデータを綺麗に表示するための「モニター」です。

| 画面・機能 | 状態 | 説明 |
| :--- | :---: | :--- |
| **ダッシュボード (TOP)** | ✅ | 保存されているデータの件数や、最終更新日を確認できます。 |
| **レース一覧・検索** | ✅ | 日付指定でレースを検索し、オッズ詳細画面へ移動できます。<br>※先にアプリでデータを取得していないと表示されません。 |
| **オッズ時系列推移** | ✅ | 特定のレースの単勝オッズの変動をグラフで見ることができます。 |
| **CSVエクスポート** | ✅ | データをExcelで開ける形式(CSV)でダウンロードできます。 |

---

## ⚠️ 画面上の「未実装（飾り）」ボタンについて

Web画面上にはボタンがありますが、**現在はまだ動作しない（見た目だけの）機能**があります。これらは「アプリ側」で操作してください。

| ボタン表示 | 現状の動作 | 正しい操作方法 |
| :--- | :--- | :--- |
| **「過去データ取得」ボタン** | 押しても反応のみで、実際のデータ取得は動きません。 | **`アプリ起動.bat` の `[1]` を使ってください。** |
| **「監視開始/停止」ボタン** | 押しても「開始しました」と出ますが、裏で通信は始まりません。 | **`アプリ起動.bat` の `[2]` を使ってください。** |

## よくある質問

**Q. Web画面に「該当するレースが見つかりません」と出る**
A. データがまだパソコンに入っていません。
　→ `アプリ起動.bat` を実行し、`[1]` を押してデータを取得してください。

**Q. リアルタイム監視中にWeb画面は更新される？**
A. はい。`アプリ起動.bat` で `[2] リアルタイム監視` を動かしている間、Web画面を再読み込み（F5）すると最新のオッズが反映されます。
